<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Plano con QR por habitación</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { text-align: center; }
    #planos-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
    .plano-box { border: 2px solid #444; background: #f9f9f9; padding: 10px; text-align: center; width: 400px; }
    svg { width: 100%; height: auto; }
    .qr-image { pointer-events: none; margin-top: 10px; }
  </style>
</head>
<body>

<h1>Planos con Rutas y Códigos QR</h1>
<div id="planos-container"></div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
  const baseUrl = 'https://TU-USUARIO.github.io/TU-REPO/plano.html'; // 🔁 Reemplaza con tu URL real

  const container = document.getElementById('planos-container');
  const svgNS = "http://www.w3.org/2000/svg";

  for (let i = 1; i <= 10; i++) {
    const svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('viewBox', '0 0 600 300');

    // Entrada
    const entrada = document.createElementNS(svgNS, 'rect');
    entrada.setAttribute('x', 20);
    entrada.setAttribute('y', 120);
    entrada.setAttribute('width', 60);
    entrada.setAttribute('height', 60);
    entrada.setAttribute('fill', 'green');
    svg.appendChild(entrada);

    const entradaTexto = document.createElementNS(svgNS, 'text');
    entradaTexto.setAttribute('x', 25);
    entradaTexto.setAttribute('y', 155);
    entradaTexto.setAttribute('fill', 'white');
    entradaTexto.setAttribute('font-weight', 'bold');
    entradaTexto.textContent = 'Entrada';
    svg.appendChild(entradaTexto);

    // Habitación
    const habX = 500;
    const habY = i <= 5 ? 60 : 180;

    const habitacion = document.createElementNS(svgNS, 'rect');
    habitacion.setAttribute('x', habX);
    habitacion.setAttribute('y', habY);
    habitacion.setAttribute('width', 80);
    habitacion.setAttribute('height', 60);
    habitacion.setAttribute('fill', '#ccc');
    habitacion.setAttribute('stroke', '#333');
    habitacion.setAttribute('stroke-width', '2');
    svg.appendChild(habitacion);

    const textoHab = document.createElementNS(svgNS, 'text');
    textoHab.setAttribute('x', habX + 5);
    textoHab.setAttribute('y', habY + 20);
    textoHab.setAttribute('fill', '#000');
    textoHab.setAttribute('font-weight', 'bold');
    textoHab.textContent = `Habitación ${i}`;
    svg.appendChild(textoHab);

    // Línea desde entrada a habitación
    const linea = document.createElementNS(svgNS, 'line');
    linea.setAttribute('x1', 50);
    linea.setAttribute('y1', 150);
    linea.setAttribute('x2', habX + 40);
    linea.setAttribute('y2', habY + 30);
    linea.setAttribute('stroke', '#007BFF');
    linea.setAttribute('stroke-width', '3');
    svg.appendChild(linea);

    // Crear QR con ruta
    const rutaQR = `${baseUrl}?hab=${i}`;
    const canvas = document.createElement('canvas');
    QRCode.toCanvas(canvas, rutaQR, { width: 100, margin: 1 }, function (error) {
      if (error) console.error(error);
      const img = document.createElement('img');
      img.classList.add('qr-image');
      img.src = canvas.toDataURL();
      planoBox.appendChild(img);
    });

    // Contenedor individual del plano + QR
    const planoBox = document.createElement('div');
    planoBox.className = 'plano-box';
    planoBox.appendChild(svg);
    container.appendChild(planoBox);
  }
</script>

</body>
</html>
